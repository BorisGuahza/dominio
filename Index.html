<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Resolución de Desigualdades</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      background: #f7f7f7;
      color: #333;
    }
    input, button {
      padding: 10px;
      margin-top: 10px;
      font-size: 16px;
      width: 100%;
    }
    #resultado {
      margin-top: 20px;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h1>Resolver Desigualdades Lineales y Cuadráticas</h1>
  <p>Escribe una desigualdad como: <br><strong>2x + 3 &lt; 5</strong> o <strong>x² - 3x + 2 &gt; 0</strong></p>

  <input type="text" id="desigualdad" placeholder="Ingresa tu desigualdad aquí">
  <button onclick="resolverDesigualdad()">Resolver</button>

  <div id="resultado"></div>

  <script>
    function resolverDesigualdad() {
      const entrada = document.getElementById("desigualdad").value.replace(/\s+/g, "");
      const resultado = document.getElementById("resultado");

      try {
        const match = entrada.match(/(.+)(<=|>=|<|>)(.+)/);
        if (!match) throw "Formato inválido";

        const izquierda = match[1];
        const operador = match[2];
        const derecha = match[3];

        // Reescribimos como expresión = 0
        const expr = `(${izquierda}) - (${derecha})`;

        // Evaluamos el tipo de desigualdad
        if (expr.includes("x^2") || expr.includes("x*x") || expr.match(/x\*x|x²/)) {
          resolverCuadratica(expr, operador, resultado);
        } else {
          resolverLineal(expr, operador, resultado);
        }

      } catch (e) {
        resultado.innerHTML = "❌ Error: " + e;
      }
    }

    function resolverLineal(expr, operador, resultado) {
      const re = /([-+]?\d*\.?\d*)x/;
      const match = expr.match(re);
      const a = parseFloat(match[1] || 1);
      const b = eval(expr.replace(re, ""));

      let x;
      if (a === 0) {
        if (eval(`${b} ${operador} 0`)) {
          resultado.innerHTML = "✅ La desigualdad se cumple para todo x ∈ ℝ";
        } else {
          resultado.innerHTML = "❌ La desigualdad no tiene solución";
        }
        return;
      }

      x = -b / a;
      const signos = { "<": "x < ", "<=": "x ≤ ", ">": "x > ", ">=": "x ≥ " };
      resultado.innerHTML = `✅ Solución: ${signos[operador]}${x}`;
    }

    function resolverCuadratica(expr, operador, resultado) {
      // Obtener coeficientes a, b, c
      const e = expr.replace(/x\^2/g, "x*x").replace(/x²/g, "x*x");
      const func = new Function("x", `return ${e};`);
      const a = func(1) - 2*func(0.5) + func(0);
      const b = (func(1) - func(-1)) / 2;
      const c = func(0);

      const D = b*b - 4*a*c;
      let sol = "";

      if (D < 0) {
        if ((a > 0 && operador === ">") || (a < 0 && operador === "<")) {
          sol = "x ∈ ℝ";
        } else {
          sol = "No hay solución real";
        }
      } else if (D === 0) {
        const r = -b / (2*a);
        if (operador === ">" || operador === "<") {
          sol = `x ∈ ℝ, x ≠ ${r}`;
        } else {
          sol = `x = ${r}`;
        }
      } else {
        const r1 = (-b + Math.sqrt(D)) / (2*a);
        const r2 = (-b - Math.sqrt(D)) / (2*a);
        const [min, max] = [Math.min(r1, r2), Math.max(r1, r2)];

        if (a > 0) {
          if (operador === ">") sol = `x < ${min} o x > ${max}`;
          if (operador === ">=") sol = `x ≤ ${min} o x ≥ ${max}`;
          if (operador === "<") sol = `x ∈ (${min}, ${max})`;
          if (operador === "<=") sol = `x ∈ [${min}, ${max}]`;
        } else {
          if (operador === "<") sol = `x < ${min} o x > ${max}`;
          if (operador === "<=") sol = `x ≤ ${min} o x ≥ ${max}`;
          if (operador === ">") sol = `x ∈ (${min}, ${max})`;
          if (operador === ">=") sol = `x ∈ [${min}, ${max}]`;
        }
      }

      resultado.innerHTML = `✅ Solución: ${sol}`;
    }
  </script>

</body>
</html>

