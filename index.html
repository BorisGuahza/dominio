<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Desigualdades Lineales y Cuadr√°ticas</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f5f8fa;
      color: #2c3e50;
      padding: 40px;
      max-width: 800px;
      margin: auto;
    }

    h1 {
      color: #34495e;
      margin-bottom: 10px;
    }

    input, button {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      margin-top: 10px;
      box-sizing: border-box;
    }

    button {
      background-color: #2ecc71;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background-color: #27ae60;
    }

    .resultado {
      background: #ffffff;
      margin-top: 25px;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    }

    .item {
      margin-bottom: 15px;
    }

    .item span {
      font-weight: bold;
    }

    .error {
      color: red;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h1>üîé Calculadora de Desigualdades</h1>
  <p>Escribe una desigualdad, por ejemplo: <code>x¬≤ - 4 &gt; 0</code> o <code>2x + 5 ‚â§ 9</code></p>

  <input type="text" id="desigualdad" placeholder="Ej: x¬≤ - 4 > 0">
  <button onclick="resolverDesigualdad()">Resolver</button>

  <div class="resultado" id="resultado"></div>

  <script>
    function resolverDesigualdad() {
      const entrada = document.getElementById("desigualdad").value.replace(/\s+/g, "");
      const resultado = document.getElementById("resultado");
      resultado.innerHTML = ""; // limpiar

      try {
        const match = entrada.match(/(.+)(<=|>=|<|>)(.+)/);
        if (!match) throw "Formato inv√°lido. Usa <, >, <= o >=";

        const izquierda = match[1];
        const operador = match[2];
        const derecha = match[3];
        const expr = `(${izquierda}) - (${derecha})`;

        const contieneCuadratica = expr.includes("x^2") || expr.includes("x*x") || expr.match(/x\*x|x¬≤/);
        if (contieneCuadratica) {
          resolverCuadratica(expr, operador, resultado);
        } else {
          resolverLineal(expr, operador, resultado);
        }

      } catch (e) {
        resultado.innerHTML = `<p class="error">‚ùå Error: ${e}</p>`;
      }
    }

    function resolverLineal(expr, operador, resultado) {
      const re = /([-+]?\d*\.?\d*)x/;
      const match = expr.match(re);
      const a = parseFloat(match[1] || (match[1] === "" ? 1 : 0));
      const b = eval(expr.replace(re, ""));

      let x, mensaje;
      if (a === 0) {
        mensaje = eval(`0 ${operador} ${b}`) ?
          "Se cumple para todo x ‚àà ‚Ñù" : "No hay soluci√≥n";
      } else {
        x = -b / a;
        const signos = { "<": "x < ", "<=": "x ‚â§ ", ">": "x > ", ">=": "x ‚â• " };
        mensaje = `${signos[operador]}${x}`;
      }

      resultado.innerHTML = `
        <div class="item">‚úÖ <span>Soluci√≥n:</span> ${mensaje}</div>
        <div class="item">üìå <span>Dominio:</span> ‚Ñù</div>
        <div class="item">üéØ <span>Rango:</span> No aplica (es desigualdad lineal)</div>
      `;
    }

    function resolverCuadratica(expr, operador, resultado) {
      const e = expr.replace(/x\^2/g, "x*x").replace(/x¬≤/g, "x*x");
      const f = new Function("x", `return ${e};`);
      const f0 = f(0), f1 = f(1), f_1 = f(-1);
      const a = f1 - 2 * f0 + f_1;
      const b = (f1 - f_1) / 2;
      const c = f0;

      const D = b * b - 4 * a * c;
      let sol = "";

      if (D < 0) {
        sol = ((a > 0 && operador === ">") || (a < 0 && operador === "<")) ?
          "x ‚àà ‚Ñù" : "No hay soluci√≥n real";
      } else if (D === 0) {
        const r = -b / (2 * a);
        sol = (operador === ">" || operador === "<") ?
          `x ‚àà ‚Ñù, x ‚â† ${r}` : `x = ${r}`;
      } else {
        const r1 = (-b + Math.sqrt(D)) / (2 * a);
        const r2 = (-b - Math.sqrt(D)) / (2 * a);
        const [min, max] = [Math.min(r1, r2), Math.max(r1, r2)];

        if (a > 0) {
          if (operador === ">") sol = `x < ${min} o x > ${max}`;
          if (operador === ">=") sol = `x ‚â§ ${min} o x ‚â• ${max}`;
          if (operador === "<") sol = `x ‚àà (${min}, ${max})`;
          if (operador === "<=") sol = `x ‚àà [${min}, ${max}]`;
        } else {
          if (operador === "<") sol = `x < ${min} o x > ${max}`;
          if (operador === "<=") sol = `x ‚â§ ${min} o x ‚â• ${max}`;
          if (operador === ">") sol = `x ‚àà (${min}, ${max})`;
          if (operador === ">=") sol = `x ‚àà [${min}, ${max}]`;
        }
      }

      // Calcular v√©rtice para estimar el rango
      const xv = -b / (2 * a);
      const yv = a * xv * xv + b * xv + c;
      const rango = (a > 0) ? `[${yv}, ‚àû)` : `(-‚àû, ${yv}]`;

      resultado.innerHTML = `
        <div class="item">‚úÖ <span>Soluci√≥n:</span> ${sol}</div>
        <div class="item">üìå <span>Dominio:</span> ‚Ñù</div>
        <div class="item">üéØ <span>Rango aproximado:</span> ${rango}</div>
      `;
    }
  </script>

</body>
</html>
