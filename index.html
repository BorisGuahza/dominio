<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Desigualdades Lineales y Cuadr√°ticas</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f5f8fa;
      color: #2c3e50;
      padding: 40px;
      max-width: 800px;
      margin: auto;
    }

    h1 {
      color: #34495e;
      margin-bottom: 10px;
    }

    input, button {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      margin-top: 10px;
      box-sizing: border-box;
    }

    button {
      background-color: #2ecc71;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background-color: #27ae60;
    }

    .resultado {
      background: #ffffff;
      margin-top: 25px;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    }

    .item {
      margin-bottom: 15px;
    }

    .item span {
      font-weight: bold;
    }

    .error {
      color: red;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h1>üîé Calculadora de Desigualdades</h1>
  <p>Escribe una desigualdad, por ejemplo: <code>x¬≤ - 4 &gt; 0</code> o <code>2x + 5 ‚â§ 9</code></p>

  <input type="text" id="desigualdad" placeholder="Ej: x¬≤ - 4 > 0">
  <button onclick="resolverDesigualdad()">Resolver</button>

  <div class="resultado" id="resultado"></div>

  <script>
function resolverDesigualdad() {
  const entrada = document.getElementById("desigualdad").value.trim().replace(/\s+/g, "");
  const resultado = document.getElementById("resultado");
  resultado.innerHTML = "";

  const desigualdadRegex = /(.+)(<=|>=|<|>)(.+)/;
  const igualdadRegex = /(.+)=([^=]+)/;

  try {
    if (desigualdadRegex.test(entrada)) {
      const match = entrada.match(desigualdadRegex);
      const izquierda = match[1];
      const operador = match[2];
      const derecha = match[3];
      const expr = `(${izquierda}) - (${derecha})`;

      const cuadratica = expr.includes("x^2") || expr.includes("x*x") || expr.match(/x\*x|x¬≤/);
      cuadratica
        ? resolverCuadratica(expr, operador, resultado)
        : resolverLineal(expr, operador, resultado);

    } else if (igualdadRegex.test(entrada)) {
      const match = entrada.match(igualdadRegex);
      const izquierda = match[1];
      const derecha = match[2];
      const expr = `(${izquierda}) - (${derecha})`;

      const cuadratica = expr.includes("x^2") || expr.includes("x*x") || expr.match(/x\*x|x¬≤/);
      cuadratica
        ? resolverEcuacionCuadratica(expr, resultado)
        : resolverEcuacionLineal(expr, resultado);

    } else {
      if (entrada.includes("x")) {
        resultado.innerHTML = `<div class="item">‚ùó Parece que olvidaste usar un operador: usa <, >, ‚â§, ‚â• o =</div>`;
      } else {
        const valor = eval(entrada);
        resultado.innerHTML = `<div class="item">üßÆ <strong>Resultado:</strong> ${valor}</div>`;
      }
    }

  } catch (e) {
    resultado.innerHTML = `<p class="error">‚ùå Error: ${e}</p>`;
  }
}

function resolverEcuacionLineal(expr, resultado) {
  const re = /([-+]?\d*\.?\d*)x/;
  const match = expr.match(re);
  const a = parseFloat(match[1] || (match[1] === "" ? 1 : 0));
  const b = eval(expr.replace(re, ""));

  if (a === 0) {
    resultado.innerHTML = b === 0
      ? "‚úÖ Soluci√≥n: x ‚àà ‚Ñù (infinitas soluciones)"
      : "‚ùå No hay soluci√≥n";
  } else {
    const x = -b / a;
    resultado.innerHTML = `
      <div class="item">‚úÖ <strong>Soluci√≥n:</strong> x = ${x}</div>
      <div class="item">üìå <strong>Dominio:</strong> ‚Ñù</div>
    `;
  }
}

function resolverEcuacionCuadratica(expr, resultado) {
  const f = new Function("x", `return ${expr.replace(/x¬≤/g, "x*x").replace(/x\^2/g, "x*x")};`);
  const f0 = f(0), f1 = f(1), f_1 = f(-1);
  const a = f1 - 2 * f0 + f_1;
  const b = (f1 - f_1) / 2;
  const c = f0;
  const D = b * b - 4 * a * c;

  if (D < 0) {
    resultado.innerHTML = `‚ùå No hay soluciones reales`;
  } else if (D === 0) {
    const r = -b / (2 * a);
    resultado.innerHTML = `‚úÖ <strong>Soluci√≥n doble:</strong> x = ${r}`;
  } else {
    const r1 = (-b + Math.sqrt(D)) / (2 * a);
    const r2 = (-b - Math.sqrt(D)) / (2 * a);
    resultado.innerHTML = `‚úÖ <strong>Soluciones:</strong> x = ${r1} y x = ${r2}`;
  }
}

// funciones resolverLineal y resolverCuadratica van igual que antes
// (no las repito aqu√≠ por brevedad, pero puedes usar las ya corregidas de la versi√≥n anterior)
</script>
